<!DOCTYPE html>
<html>
<head>
    <title>Video Player M3U8</title>
    <script src="//cdn.jsdelivr.net/npm/@clappr/player@0.6.0/dist/clappr.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/gh/clappr/clappr-level-selector-plugin@0.3.0/dist/level-selector.min.js"></script>
    <script src="/histats.js"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: black;
        }

        #player {
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
        }
        /* Menimpa gaya poster Clappr untuk menjaga proporsi */
        .player-poster[data-poster] {
            background-size: contain !important; /* Menjaga rasio aspek poster */
            background-color: black !important; /* Warna latar belakang hitam */
        }
    </style>
  
  <script type='text/javascript' src='//disappearsurgery.com/93/c9/e1/93c9e1602f4c05da2a587d287c363a0e.js'></script>
  
</head>
<body>
    <div id="player"></div>
    <script>
        // Daftar file M3U8 berdasarkan key
        const videoSources = {
<!-- Awal Data -->
'aCVoFbRk0b': 'https://op-group1-swiftservehd-1.dens.tv/h/h217/index.m3u8',
'l2dyodD3R1': 'https://op-group1-swiftservehd-1.dens.tv/h/h235/index.m3u8',
'VTPFlAcx8F': 'https://op-group1-swiftservehd-1.dens.tv/h/h207/index.m3u8',
'r3oPYkNIwI': 'https://vietnam.elutuna.workers.dev/channel18.m3u8?auth_key=3000001736576511-0-0-3048101522c6c64a5230d3880af81200',
'XGl13wmbpU': 'https://livecloud.pstatic.net/sports/lip2_kr/anmssgpu0002/rqeqgawwu9hsrdrv0lxd8bsww5bupk4rakru/playlist.m3u8?hdnts=st=1736578366~exp=1736610776~acl=*/rqeqgawwu9hsrdrv0lxd8bsww5bupk4rakru/*~hmac=e73b4f79b64e9b4eb5b7b820e57f0bb5a045d9103b335956895fe3702d5aff3d',
'TAZXlqJ5YL': 'https://vietnam.elutuna.workers.dev/channel10.m3u8?auth_key=3000001736583675-0-0-4da6b981aae84804c1ab2038653960b1',
'dCeQz9OTIm': 'https://vietnam.elutuna.workers.dev/channel7.m3u8?auth_key=3000001736596266-0-0-2fc8f122dc6cc15d83b931910224ac17',
'LUt3W6bhyk': 'https://livecloud.pstatic.net/sports/lip2_kr/cnmssgpu0001/0wv1cweisncqmlmggq1iwsowcjd0zr79ihet/playlist.m3u8?hdnts=st=1736658304~exp=1736690714~acl=*/0wv1cweisncqmlmggq1iwsowcjd0zr79ihet/*~hmac=0e5576c278b6ebcb4f9b8eea0145eacf95f58ed002291e696f9c53e77d5d9ad7',
'v5BXQjxQSt': 'https://livecloud.pstatic.net/sports/lip2_kr/anmssgpu0004/qihhj7yrun5mwdjvzbxm1e9etjd3h5c20kal/playlist.m3u8?hdnts=st=1736664814~exp=1736697224~acl=*/qihhj7yrun5mwdjvzbxm1e9etjd3h5c20kal/*~hmac=0ce2af253e1d550e73a6b96fd47d1274f514bcf76e1b34c7f44598100e6e5a3b',
'bJxMlEqymW': 'https://jancok84.elutuna.workers.dev/4N7XV11c951RLQuCaHrh2w/Fv2lucGIbhPi2caWYvF5Lg/1736691960976/live/trauHD/playlist.m3u8',
'UhTMHNPnBS': 'https://vietnam.elutuna.workers.dev/channel5.m3u8?auth_key=3000001736670448-0-0-e077ea93673c11f496462f0e19907156',
'WNK78k2eB9': 'https://jancok.elutuna.workers.dev/uiBZhCkr0W5EpQPRNcgojQ/Fv2lucGIbhPi2caWYvF5Lg/1736697252077/live/may171/playlist.m3u8',
'Q7yjJ5Hq5j': 'https://jancok.elutuna.workers.dev/V8-u7UTjXRfPBlSvjxVTTQ/Fv2lucGIbhPi2caWYvF5Lg/1736702497643/live/may25/playlist.m3u8',
<!-- Akhir Data -->
        };

        // Fungsi untuk mendapatkan parameter dari URL
        function getQueryParameter(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Ambil key dari URL
        const videoKey = getQueryParameter('key');

        // Tentukan file M3U8 berdasarkan key, gunakan sumber default jika key tidak ditemukan
        const videoFile = videoSources[videoKey] || Object.values(videoSources)[0]; // Gunakan file pertama sebagai default

        // Konfigurasi Clappr Player
        var playerElement = document.getElementById("player");
        var player = new Clappr.Player({
            source: videoFile,
            height: '100%',
            width: '100%',
            loop: false,
            poster: 'https://www.streamkaltaraid.online/images/poster.png', // Poster video
            plugins: [LevelSelector],
            mediacontrol: {
                seekbar: '#014AFF',
                buttons: '#FFF'
            },
            playback: {
                hlsjsConfig: {
                    startPosition: -1, // Selalu mulai dari posisi live terkini
                }
            },
            mimeType: "application/x-mpegURL"
        });
        player.attachTo(playerElement);

        // Fungsi untuk mengubah orientasi ke landscape saat fullscreen
        player.on(Clappr.Events.PLAYER_FULLSCREEN, function() {
            if (screen.orientation && screen.orientation.lock) {
                screen.orientation.lock('landscape').catch(function(error) {
                    console.error('Orientation lock failed:', error);
                });
            }
        });

        // Kembalikan orientasi saat keluar dari fullscreen
        player.on(Clappr.Events.PLAYER_EXIT_FULLSCREEN, function() {
            if (screen.orientation && screen.orientation.unlock) {
                screen.orientation.unlock();
            }
        });

        // Event handling untuk error
        player.on(Clappr.Events.PLAYER_ERROR, function() {
            console.error('Error occurred while playing the video. Retrying...');
            setTimeout(function() {
                player.load({ source: videoFile });
                player.play();
            }, 5000); // Coba lagi setelah 5 detik
        });
    </script>
</body>
</html>
